let data = [
    {
        "Id": 57,
        "Name": "1.1 - Sanajy Gajjar (Ahmedabad)",
        "TeamUsers": [
            {
                "Id": 2156,
                "Name": "Sanjay Natvarbhai Gajjar",
                "Code": null,
                "IsTeamLead": true
            },
            {
                "Id": 2205,
                "Name": "Dhaval Makwana",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 3691,
                "Name": "Akshay Pandya",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 3736,
                "Name": "Saijibhai Desai",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 3798,
                "Name": "Sagar Taviyad",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 4103,
                "Name": "Yash Suthar",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 4192,
                "Name": "Kalpesh Panchal",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 4239,
                "Name": "Dhruv Patel",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 4240,
                "Name": "Rajan Shergill",
                "Code": null,
                "IsTeamLead": false
            }
        ],
        "ManagerId": null,
        "ManagerName": ""
    },
    {
        "Id": 266,
        "Name": "1.10 - Mayur Chauhan (Ahmedabad)",
        "TeamUsers": [
            {
                "Id": 5716,
                "Name": "Sourav Dangi",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5732,
                "Name": "Mayursingh Chauhan",
                "Code": null,
                "IsTeamLead": true
            },
            {
                "Id": 5744,
                "Name": "Dhaval Kori",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5776,
                "Name": "Pritee Rajput",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5777,
                "Name": "Abhishek Vaghela",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6058,
                "Name": "Amit Shah",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6129,
                "Name": "Alpesh Thakkar",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6604,
                "Name": "Vinita Rawal",
                "Code": null,
                "IsTeamLead": false
            }
        ],
        "ManagerId": null,
        "ManagerName": ""
    },
    {
        "Id": 302,
        "Name": "1.11- Khushali Nagori (Ahmedabad)",
        "TeamUsers": [
            {
                "Id": 5805,
                "Name": "Heli Desai",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6309,
                "Name": "Khushali Nagori",
                "Code": null,
                "IsTeamLead": true
            },
            {
                "Id": 6311,
                "Name": "Nikhil Desai",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6517,
                "Name": "Sohin Dhandhukia",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6656,
                "Name": "Yogita",
                "Code": null,
                "IsTeamLead": false
            }
        ],
        "ManagerId": 2938,
        "ManagerName": "Anuj Chaudhary"
    },
    {
        "Id": 330,
        "Name": "1.12- Nilesh Dhuppad (Ahmedabad)",
        "TeamUsers": [
            {
                "Id": 6573,
                "Name": "Nilesh Dhuppad ",
                "Code": null,
                "IsTeamLead": true
            },
            {
                "Id": 6711,
                "Name": "Mamta Rathod",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6712,
                "Name": "Manojsingh Tomar",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6713,
                "Name": "Pramodkumar Sankhala",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6714,
                "Name": "Sandip Soni",
                "Code": null,
                "IsTeamLead": false
            }
        ],
        "ManagerId": null,
        "ManagerName": ""
    },
    {
        "Id": 59,
        "Name": "1.2 - Ronak Vaghela (Ahmedabad)",
        "TeamUsers": [
            {
                "Id": 2157,
                "Name": "Ronak Vaghela",
                "Code": null,
                "IsTeamLead": true
            }
        ],
        "ManagerId": null,
        "ManagerName": ""
    },
    {
        "Id": 139,
        "Name": "1.3 - Brijesh Vora (Ahmedabad)",
        "TeamUsers": [
            {
                "Id": 2166,
                "Name": "Sheel Jignesh Shah",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 3320,
                "Name": "Brijeshkumar Vora",
                "Code": null,
                "IsTeamLead": true
            },
            {
                "Id": 4194,
                "Name": "Dhavalsinh Vaghela",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 4786,
                "Name": "Pruthvisinh Chavda",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 4798,
                "Name": "Chetan Gohel",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5469,
                "Name": "Rilex Roy",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5715,
                "Name": "Vaidikkumar Patel",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5864,
                "Name": "Mittal Purohit",
                "Code": null,
                "IsTeamLead": false
            }
        ],
        "ManagerId": 2938,
        "ManagerName": "Anuj Chaudhary"
    },
    {
        "Id": 166,
        "Name": "1.5 - Abhishek Thakkar (Ahmedabad)",
        "TeamUsers": [
            {
                "Id": 3828,
                "Name": "Mukesh Singadiya",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 4020,
                "Name": "Abhishek Thakkar",
                "Code": null,
                "IsTeamLead": true
            },
            {
                "Id": 4036,
                "Name": "Abhishek Pithva",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 4104,
                "Name": "Prachi Agrawal",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5446,
                "Name": "Rabina Chhetri",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6606,
                "Name": "Prashant Dharmendra Jethva",
                "Code": null,
                "IsTeamLead": false
            }
        ],
        "ManagerId": null,
        "ManagerName": ""
    },
    {
        "Id": 238,
        "Name": "1.9 Landkart (Ahmedabad)",
        "TeamUsers": [
            {
                "Id": 5142,
                "Name": "Divyanshi Aggarwal",
                "Code": null,
                "IsTeamLead": true
            }
        ],
        "ManagerId": null,
        "ManagerName": ""
    },
    {
        "Id": 293,
        "Name": "2.1 - Vishal Yadav (Mumbai)",
        "TeamUsers": [
            {
                "Id": 5175,
                "Name": "Purvesh Brahmbhatt",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5208,
                "Name": "Vishal Yadav",
                "Code": null,
                "IsTeamLead": true
            },
            {
                "Id": 5212,
                "Name": "Piyush Parmar",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5471,
                "Name": "Chandresh Rai",
                "Code": null,
                "IsTeamLead": false
            }
        ],
        "ManagerId": 5173,
        "ManagerName": "Snigdh Saklani"
    },
    {
        "Id": 292,
        "Name": "2.2 - Shubham Kumar Jaiswal (Mumbai)",
        "TeamUsers": [
            {
                "Id": 5176,
                "Name": "Rohit Mahida",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5200,
                "Name": "Asiya Khan",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5205,
                "Name": "Shubham Kumar Jaiswal",
                "Code": null,
                "IsTeamLead": true
            },
            {
                "Id": 5209,
                "Name": "Arnold Dmello",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6673,
                "Name": "Saniya Khan",
                "Code": null,
                "IsTeamLead": false
            }
        ],
        "ManagerId": 5173,
        "ManagerName": "Snigdh Saklani"
    },
    {
        "Id": 294,
        "Name": "2.3 - Roshan Pandey (Mumbai)",
        "TeamUsers": [
            {
                "Id": 5213,
                "Name": "Vijay Kamble",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5593,
                "Name": "Roshan Pandey",
                "Code": null,
                "IsTeamLead": true
            },
            {
                "Id": 5710,
                "Name": "IBAD SHAIKH",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5711,
                "Name": "Randhir Biswas",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5712,
                "Name": "Neha khalfe",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5713,
                "Name": "Praful Gupta",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5714,
                "Name": "Vinit Pandey",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6652,
                "Name": "Amruta Nikam ",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6655,
                "Name": "Holash Pareek",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6672,
                "Name": "Ashish Tiwari",
                "Code": null,
                "IsTeamLead": false
            }
        ],
        "ManagerId": 5173,
        "ManagerName": "Snigdh Saklani"
    },
    {
        "Id": 240,
        "Name": "2.4 - Sagar Shinde (Mumbai)",
        "TeamUsers": [
            {
                "Id": 5859,
                "Name": "Neha Shaikh",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5860,
                "Name": "Subhash Chandra",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5862,
                "Name": "Akash Susvirkar",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5863,
                "Name": "Sagar Shinde",
                "Code": null,
                "IsTeamLead": true
            },
            {
                "Id": 6653,
                "Name": "Muskan Lulla",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6654,
                "Name": "Rohan Ramesh Mandavkar",
                "Code": null,
                "IsTeamLead": false
            }
        ],
        "ManagerId": 5173,
        "ManagerName": "Snigdh Saklani"
    },
    {
        "Id": 325,
        "Name": "2.5 - Krishna Kumar Tiwari (Mumbai)",
        "TeamUsers": [
            {
                "Id": 5207,
                "Name": "Sudha Asari",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5261,
                "Name": "Ashish Yadav",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5588,
                "Name": "Goldi Singh",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 5947,
                "Name": "Anjali Gavai",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6542,
                "Name": "Krishna Kumar ",
                "Code": null,
                "IsTeamLead": true
            },
            {
                "Id": 6644,
                "Name": "Pawan Ashok Dubey",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6645,
                "Name": "Purnakumar Bansode",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6646,
                "Name": "Surajkumar Surendra Yadav",
                "Code": null,
                "IsTeamLead": false
            }
        ],
        "ManagerId": null,
        "ManagerName": ""
    },
    {
        "Id": 326,
        "Name": "3.1- Santosh Gujar (Pune)",
        "TeamUsers": [
            {
                "Id": 6408,
                "Name": "Swapnil Dhumal",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6419,
                "Name": "Santosh Gujar",
                "Code": null,
                "IsTeamLead": true
            },
            {
                "Id": 6452,
                "Name": "Kamlesh Patil",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6454,
                "Name": "Nivrutti Saindane",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6455,
                "Name": "Rohit Waghmare",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6565,
                "Name": "Akhil Ashokrao Sarnaik",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6566,
                "Name": "Yashvant Vilasrao Deshmukh",
                "Code": null,
                "IsTeamLead": false
            }
        ],
        "ManagerId": null,
        "ManagerName": ""
    },
    {
        "Id": 327,
        "Name": "3.2- Sachin Yadav (Pune)",
        "TeamUsers": [
            {
                "Id": 6407,
                "Name": "PV Abhishek",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6409,
                "Name": "Abhay Dwivedi",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6410,
                "Name": "Ganesh Jadhav",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6456,
                "Name": "Nitish Dede",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6489,
                "Name": "Sachin Yadav",
                "Code": null,
                "IsTeamLead": true
            },
            {
                "Id": 6568,
                "Name": "Arjun Chemate",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6590,
                "Name": "Rushikesh Ghule",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6591,
                "Name": "Nishant Singh",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6592,
                "Name": "Sunny Singh",
                "Code": null,
                "IsTeamLead": false
            },
            {
                "Id": 6607,
                "Name": "Abhijit Nikam",
                "Code": null,
                "IsTeamLead": false
            }
        ],
        "ManagerId": null,
        "ManagerName": ""
    }
]

let resp = [{
    "name": "Gurukrupa",
    "imageUrl": "https://raw.githubusercontent.com/bumbeishvili/Assets/master/Projects/D3/Organization%20Chart/cto.jpg",
    "positionName": "Company",
    "id": "#",
    "parentId": "",
}];


const createManagerNode = (data) => {
    let isManagerPresent = resp.findIndex((e) => e.id === data.ManagerId);
    if (isManagerPresent == -1) {
        resp.push({
            "name": data.ManagerName,
            "imageUrl": "https://raw.githubusercontent.com/bumbeishvili/Assets/master/Projects/D3/Organization%20Chart/cto.jpg",
            "positionName": "Manager",
            "id": data.ManagerId,
            "parentId": "#"
        })
    }
}

const createTeamNode = (data) => {
    let isTeam = resp.findIndex((e) => e.id === data.Id);
    if (isTeam == -1) {
        resp.push({
            "name": data.Name,
            "imageUrl": "https://raw.githubusercontent.com/bumbeishvili/Assets/master/Projects/D3/Organization%20Chart/cto.jpg",
            "positionName": "Team",
            "id": data.Id,
            "parentId": !!data.ManagerId ? data.ManagerId : "#" // if managerId present then add into manager's node, else create seprate node
        })
    }

    if (!!data.TeamUsers && !!data.TeamUsers.length) {
        data.TeamUsers.forEach((ele) => {
            resp.push({
                "name": ele.Name,
                "imageUrl": "https://raw.githubusercontent.com/bumbeishvili/Assets/master/Projects/D3/Organization%20Chart/cto.jpg",
                "positionName": !!ele.IsTeamLead ? "Team Lead" : "", // if team lead then represnt as team lead
                "id": ele.Id,
                "parentId": data.Id
            })
        })
    }
}


data.forEach((e) => {
    if (!!e.ManagerId && !!e.ManagerName && !!e.Id && !!e.Name) {
        createManagerNode(e);
        createTeamNode(e);
    } else if (!!e.Id && !!e.Name) {
        createTeamNode(e);
    }
})

console.log(JSON.stringify(resp))